(self.webpackChunkclient=self.webpackChunkclient||[]).push([[703],{4077:function(e,t,n){"use strict";n.d(t,{c:function(){return s}}),n(2526),n(1817),n(1539),n(2165),n(6992),n(8783),n(3948),n(7042),n(1038),n(7941),n(7327),n(5003),n(4747),n(9337);var r=n(7378);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useState)(e),n=c(t,2),a=n[0],i=n[1],s=function(e){var t=e.target;i(o(o({},a),{},l({},t.name,t.value)))},u=function(){return i(e)};return{formValues:a,handleInputChange:s,resetForm:u,setFormValues:i}}},9069:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}}),n(4747),n(2526),n(1817),n(1539),n(2165),n(6992),n(8783),n(3948),n(7042),n(1038);var r=n(9226),a=n(7378),o=n(306),l=n(1996),c=n(9563),i=n(6842),s=n(8658),u=n(383),d=(n(7941),n(7327),n(5003),n(9337),n(2132)),f=n(9883),p=n(4171),v=n(7840);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){return{type:f.V.eventSetActive,payload:{event:e}}},j=function(e,t,n){return function(r){(function(e,t){var n=e.title,r=e.notes,a=e.startDate,o=e.endDate;return v.Z.put("/events/".concat(t),{title:n,notes:r,startDate:a,endDate:o})})(t,n).catch((function(t){401!==t.response.status&&(console.log(t.response),d.Am.error("An error occurred while editing the event"),r(g(e)))})),r(g(t,n))}},g=function(e,t){return{type:f.V.eventEdit,payload:{event:y({id:t},e)}}};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w,P=0,S=null,E=n(4246);function N(){var e=(0,r.I0)(),t=(0,r.v9)((function(e){return e.events})).activeEvent;return(0,E.jsx)("button",{onClick:function(t){t.preventDefault(),e(h(null)),e((0,u.uU)())},className:"calendar__button newEventButton opacity-".concat(t?"0":"1"),children:(0,E.jsx)("i",{className:"fas fa-plus"})})}var C=n(7865);function I(){var e=(0,r.I0)(),t=(0,r.v9)((function(e){return e.auth})).name;return(0,E.jsxs)("nav",{className:"navbar__nav",children:[(0,E.jsx)("p",{children:t}),(0,E.jsx)("div",{className:"navbar__logout",children:(0,E.jsxs)("button",{onClick:function(){return e((0,C.dg)())},className:"navbar__button",children:[(0,E.jsx)("p",{className:"navbar__logout__p",children:"Logout"}),(0,E.jsx)("i",{className:"fas fa-sign-out-alt"})]})})]})}function A(){var e=(0,r.I0)(),t=(0,r.v9)((function(e){return e.events})).activeEvent;return(0,E.jsx)("button",{onClick:function(t){t.preventDefault(),t.stopPropagation(),e((0,u.uU)())},className:"calendar__button editEventButton opacity-".concat(t?"1":"0"),children:(0,E.jsx)("i",{className:"fas fa-edit"})})}function k(){var e=(0,r.I0)(),t=(0,r.v9)((function(e){return e.events})).activeEvent;return(0,E.jsx)("button",{onClick:function(n){var r;n.preventDefault(),e((r=t.id,function(e){(function(e){return v.Z.delete("/events/".concat(e))})(r).then((function(t){return t.data.ok&&e(function(e){return{type:f.V.eventDelete,payload:{eventId:e}}}(r))})).catch((function(e){return e}))})),e(h(null))},className:"calendar__button deleteEventButton opacity-".concat(t?"1":"0"),children:(0,E.jsx)("i",{className:"fas fa-trash"})})}var T=n(8591),V=(n(2222),n(3935)),M=n(5697),L=n.n(M),Z=function(e){var t=e.children;return(0,V.createPortal)(t,document.getElementById("modal-root"))};function H(e){var t=e.isOpen,n=e.children,a=(0,r.I0)();return(0,E.jsx)(Z,{children:(0,E.jsx)("div",{onClick:function(){return a((0,u.Cg)())},className:"".concat("_1HeRTJYMl-Q7cQLxtKM-9M"," opacity-").concat(t?"1":"0"),children:(0,E.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:"".concat("_1s0CD_t_wSgy7iLBokKxm7"),children:n})})})}H.propTypes={isOpen:L().bool,children:L().arrayOf(L().element)};var F=n(4077);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(){var e=(0,r.v9)((function(e){return e})),t=e.events.activeEvent,n=e.ui.modal.isModalOpen,o=(0,r.I0)(),l=function(){var e=(0,r.v9)((function(e){return e})),t=e.events,n=t.activeEvent,o=t.activeSlot,l=e.ui.modal.isModalOpen,c=(0,r.I0)(),i=function(){if(n){var e=n.title,t=n.start,r=n.end;return{title:e,notes:n.extendedProps.notes,startDate:t,endDate:r}}var a=o?new Date(o.date):new Date,l=o?new Date(o.date):new Date;return l.setHours(a.getHours()+1),{title:"",notes:"",startDate:a,endDate:l}},s=(0,F.c)(i),d=s.formValues,f=s.handleInputChange,p=s.setFormValues;return(0,a.useEffect)((function(){l&&p(i())}),[l]),{modalFormValues:d,closeCalendarModal:function(){return c((0,u.Cg)())},modalHandleInputChange:f,modalStartDateChangeHandler:function(e){return p(B(B({},d),{},{startDate:e}))},modalEndDateChangeHandler:function(e){return p(B(B({},d),{},{endDate:e}))}}}(),c=l.modalFormValues,i=l.closeCalendarModal,s=l.modalHandleInputChange,d=l.modalStartDateChangeHandler,p=l.modalEndDateChangeHandler,m=c.title,y=c.notes;return(0,E.jsxs)(H,{isOpen:n,children:[(0,E.jsxs)("div",{className:"modal__header",children:[(0,E.jsxs)("h1",{className:"modal__headTitle",children:[t?"Edit Event":"New Event"," "]}),(0,E.jsx)("span",{onClick:i,className:"modal__close",children:(0,E.jsx)("i",{className:"fas fa-times-circle fa-2x"})})]}),(0,E.jsx)("hr",{className:"modal__hr--first"}),(0,E.jsxs)("form",{className:"modal__form",onSubmit:function(e){var n;e.preventDefault(),o(t?j(t,c,t.id):(n=c,function(e){(function(e){var t=e.title,n=e.notes,r=e.startDate,a=e.endDate;return v.Z.post("/events",{title:t,notes:n,startDate:r,endDate:a})})(n).then((function(t){return e(function(e){return{type:f.V.eventAddNew,payload:{event:e}}}(t.data.event))})).catch((function(e){return e}))})),i()},children:[(0,E.jsxs)("div",{className:"modal__container",children:[(0,E.jsx)("label",{className:"modal__label",children:"Start date and time"}),(0,E.jsx)(T.Z,{disableClock:!0,clearIcon:null,onChange:d,value:c.startDate,className:"modal__input"})]}),(0,E.jsxs)("div",{className:"modal__container",children:[(0,E.jsx)("label",{className:"modal__label",children:"End date and time"}),(0,E.jsx)(T.Z,{disableClock:!0,clearIcon:null,onChange:p,value:c.endDate,minDate:c.startDate,className:"modal__input modal__input--endDate"})]}),(0,E.jsx)("hr",{className:"modal__hr"}),(0,E.jsxs)("div",{className:"modal__container",children:[(0,E.jsx)("label",{className:"modal__label",children:"Title and Notes"}),(0,E.jsx)("input",{type:"text",className:"modal__input",placeholder:"Event title",name:"title",autoComplete:"off",value:m,onChange:s,required:!0}),(0,E.jsx)("small",{className:"modal__small",children:"A short description"})]}),(0,E.jsxs)("div",{className:"modal__container",children:[(0,E.jsx)("textarea",{type:"text",className:"modal__input",placeholder:"Notes",rows:"5",name:"notes",value:y,onChange:s}),(0,E.jsx)("small",{className:"modal__small",children:"Additional Information"})]}),(0,E.jsxs)("button",{type:"submit",className:"modal__button",children:[(0,E.jsx)("i",{className:"far fa-save"}),(0,E.jsx)("span",{children:" Save"})]})]})]})}function R(e){var t=e.event,n=t.title,r=t.start,a=(t.extendedProps.notes,r.getHours()>=12?"pm":"am");return(0,E.jsx)("div",{children:(0,E.jsxs)("span",{children:[(0,E.jsxs)("strong",{children:[r.getHours(),":",String(r.getMinutes()).padStart(2,"0"),a]})," ",n]})})}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(){var e=(0,r.I0)(),t=(0,r.v9)((function(e){return e.events})),n=t.events,d=t.activeEvent;(0,a.useEffect)((function(){e((function(e){return v.Z.get("/events/all").then((function(t){var n=t.data;return e(function(e){return{type:f.V.loadEvents,payload:{events:e}}}(n.events))})).catch((function(){return e((0,u.L4)(p.Q.FAILED_TO_LOAD_EVENTS))}))}))}),[e]);var m,y,b=(m=(0,a.useState)(localStorage.getItem("lastView")||"dayGridMonth"),y=2,function(e){if(Array.isArray(e))return e}(m)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw a}}return o}}(m,y)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(m,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=b[0],O=b[1],_=function(t){var n=t.event,r=t.oldEvent,a={title:n.title,notes:n.extendedProps.notes,startDate:n.start,endDate:n.end},o={title:r.title,notes:r.extendedProps.notes,startDate:r.start,endDate:r.end};e(j(o,a,n.id))},C=function(){document.querySelectorAll('[data-event-id="'.concat(d.id,'"]')).forEach((function(e){return e.classList.remove("selectedEvent")}))},T=function(e){document.querySelectorAll('[data-event-id="'.concat(e.el.dataset.eventId,'"]')).forEach((function(e){return e.classList.add("selectedEvent")}))},V=screen.width<768;return(0,E.jsxs)("div",{className:"calendar__root",children:[(0,E.jsxs)("div",{className:"calendar__wrapper",children:[(0,E.jsx)(I,{}),(0,E.jsx)("div",{style:{padding:"10px"},children:(0,E.jsx)(o.ZPm,{eventLongPressDelay:200,timeZone:"local",plugins:[l.ZP,s.ZP,i.ZP,c.Z],initialView:g,eventDataTransform:function(e){return function(e){if("object"===x(e))return D(D({},e),{},{start:new Date(e.startDate),end:new Date(e.endDate)})}(e)},events:n,eventDidMount:function(t){t.el.dataset.eventId=t.event.id,d&&t.event.id===d.id&&T(t),t.el.addEventListener("dblclick",(function(n){n.stopPropagation(),e(h(t.event)),e((0,u.uU)())}))},eventClick:function(t){e(h(t.event)),d&&C(),T(t)},eventTextColor:"black",eventContent:R,eventResizableFromStart:!0,eventResize:_,eventDrop:_,eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},editable:!0,selectable:!V,dateClick:function(t){var n;e(h(null)),e((n=t,{type:f.V.setActiveSlot,payload:{slot:{date:n.date,dateStr:n.dateStr,allDay:n.allDay}}})),d&&C(),!V&&function(e){if(!e&&"DEVELOPMENT"==={API_URL:"https://mern-calendar-production-9c8f.up.railway.app/api"}.MODE)throw Error("parameters are required");return 1==++P&&(S=e,w=setTimeout((function(){P=0}),500)),2===P&&(clearTimeout(w),P=0,e.dateStr===S.dateStr)}(t)&&e((0,u.uU)())},allDaySlot:!1,allDayText:"All day",viewDidMount:function(e){O(e.view.type),localStorage.setItem("lastView",e.view.type)},headerToolbar:{start:"prev,today,next",center:"title",end:"listYear dayGridMonth timeGridWeek dayGridDay"},unselectAuto:!1})})]}),(0,E.jsx)(G,{}),(0,E.jsx)(A,{}),(0,E.jsx)(N,{}),(0,E.jsx)(k,{})]})}n(3112),R.propTypes={event:L().object}}}]);